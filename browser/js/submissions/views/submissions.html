  <style>
    .grey {
     background-color:#EEEEEE;
     color:#000000 !important;
   }
   .border-bottom{
    border-bottom: 1px solid #dcdcdc;
  }
</style>
<ng-include src="'js/home/views/_adminHeaderNavigation.html'"></ng-include>
<!-- Content Start  -->
<div id="wrapper">
  <ng-include src="'js/home/views/_adminNavigations.html'"></ng-include>
  <div class="container-fluid height-100pr">
    <div class="row">
      <div class="col-md-12">
        <div class="page-content right-side">
          <!--page-contant Start-->
          <div class="tabs-5">
            <!-- Nav tabs :Start-->
            <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" class="active" style="border-radius: 10px 0 0 0;"><a style="border-radius:10px 0 0 0;" href="#mysubmissions" aria-controls="mysubmissions" role="tab" data-toggle="tab"><img src="assets/images/music-icon-big.svg"/>SUBMISSIONS<div class="badge notification-bubble-submission-count" ng-show="counts.regularCount > 0">{{counts.regularCount}}</div></a>
              </li>
              <li role="presentation"><a href="#marketplace" aria-controls="marketplace" role="tab" data-toggle="tab"><img src="assets/images/mysubmissions-cart.svg"/>MARKETPLACE<div class="badge notification-bubble-submission-count" ng-show="counts.marketCount > 0">{{counts.marketCount}}</div></a></a></li>
              <li role="presentation"><a href="#managesubmissions" aria-controls="managesubmissions" role="tab" data-toggle="tab"> <img src="assets/images/managereposts.svg"/>CUSTOM EMAILS</a></li>
              <li role="presentation" style="border-radius:0 10px 0 0;"><a style="border-radius:0 10px 0 0;" href="#soldReposts" aria-controls="soldReposts" role="tab" data-toggle="tab"> <img src="assets/images/managereposts.svg"/>SOLD REPOSTS</a></li>
            </ul>
            <!-- Nav tabs :End-->
            <!-- Tab panes :: Start-->
            <div class="tab-content">
              <!-- MY SCHEDULE : Start-->
              <div role="tabpanel" class="tab-pane fade in active" id="mysubmissions">
                <div class="container-90">
                  <row class="col-md-6">
                    <label class="switch">
                      <input type="checkbox" checked="" ng-model="user.repostSettings.poolOn" ng-change="togglePoolOn()">
                      <div class="slider round"></div>
                    </label>
                    <span style='font-size:1.2em; vertical-align:middle;'>AU Marketplace <a href="" ng-click="whatIsPool()">?</a></span>
                  </row>
                  <row class="col-md-6">
                    <h4 style="text-align:right;">{{counts.regularCount}} submissions</h4>
                  </row>   
                  <div class="submi-section" ng-repeat="sub in showingElements" ng-class="{'border-bottom':!$last}" >
                    <div class="">
                      <div class="row">
                        <div class="col-md-12">
                          <ul class="submissions-tab-list">
                            <li><strong>{{sub.name}} </strong>submitted a track <strong>{{sub.datedata}}</strong> to <strong>{{sub.userID.name}}</strong></li>
                            <a href="{{sub.trackURL}}" target="_blank">Listen on Soundcloud</a>
                          </ul>   
                        </div>
                      </div>
                      <!--row ::end-->               
                      <div class="row">
                        <div class="col-md-10">                         
                          <div>
                            <iframe id="{{sub.trackID}}player" width="100%" height="160" src="{{sub.playerURL}}" style="margin:10px 0; position:relative; z-index:1; border:none;"></iframe>
                          </div>
                        </div>
                        <div class="col-md-2">
                          <div style="padding-top: 20px;">
                            <ul class="submissions-tab-list">
                              <div class="dropdown sort-btn">
                                <button class="btn btn-sm dropdown-toggle sort-select descending" type="button" data-toggle="dropdown">CUSTOM EMAIL</button>
                                <ul class="dropdown-menu">
                                  <li><a href="#" ng-click="openEmailClient(sub, button)" ng-repeat="button in user.submissionsCustomEmailButtons">{{button.buttonText}}</a></li>
                                </ul>
                              </div>
                              <button class="btn btn-border b-radius-10 btn-sm btn-block " ng-click="ignore(sub)">IGNORE</button>
                              <button class="btn btn-border b-radius-10 btn-sm btn-block" ng-click="decline(sub)">DECLINE</button>  
                              <button class="btn btn-pink btn-sm  b-radius-10 btn-block" ng-click="save(sub)">ACCEPT</button>
                            </ul> 
                          </div>
                        </div>
                      </div>
                      <!--row ::end-->
                      <div class="row">
                        <div class="col-md-6">
                          <div class="channel-check">
                            <div class="channel-masege">
                              <ul style="height: 20px;">
                                <li ng-repeat="chans in sub.selectedChannelName">{{chans}}</li>
                              </ul>
                            </div>
                            <div class="check-list">
                              <form action="#" >
                                <div class="pull-left" style="width:50%;" ng-repeat="chan in paidRepostAccounts">
                                  <p>
                                    <label class="with-square-checkbox" ng-style="checkboxStyle(sub, chan)">
                                      <input style="" class="ng-untouched ng-valid ng-dirty ng-valid-parse ng-pristine ng-empty" type="checkbox" ng-model="sub[chan.user.username]" ng-change="changeBox(sub, chan)">
                                      <span>{{chan.user.username}}</span> </label>
                                    </p>
                                  </div>
                                </form>                      
                              </div>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="channel-check" ng-if="uniqueGroup.length!= 0">
                              <div class="channel-masege">
                                <ul style="height: 20px;">
                                  <li class="" ng-repeat="groups in sub.selectedGroups">{{groups}}</li>
                                </ul>
                              </div>
                              <div class="check-list">
                                <form action="#">
                                 <div class="pull-left" style="width:50%;" ng-repeat="group in uniqueGroup">
                                   <p>
                                    <label class="with-square-checkbox">
                                      <input style="" class="ng-untouched ng-valid ng-dirty ng-valid-parse ng-pristine ng-empty" type="checkbox" ng-model="sub[group]" ng-change="changeBoxGroup(sub, group)">
                                      <span>{{group}}</span></label>
                                    </p>
                                  </div>
                                </form>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!--row ::end-->
                      </div>
                    </div>            
                    <br/>
                    <div class="col-md-12 text-center margin-20" >
                      <button class="btn btn-pink" ng-click="loadMore()">LOAD MORE</button>           
                    </div>
                    <div class="space-10"></div>
                  </div>
                </div>
                <!-- MY SCHEDULE : End-->
                <!-- ORGANIZE SCHEDULE :Start -->
                <div role="tabpanel" class="tab-pane fade" id="marketplace">
                  <div class="container-90">
                    <row class="col-md-6">
                      <label class="switch">
                        <input type="checkbox" checked="" ng-model="user.repostSettings.poolOn" ng-change="togglePoolOn()">
                        <div class="slider round"></div>
                      </label>
                      <span style='font-size:1.2em; vertical-align:middle'>AU Marketplace<a href="" ng-click="whatIsPool()">?</a></span>
                    </row>
                    <row class="col-md-6">
                      <h4 style="text-align:right;">{{counts.marketCount}} submissions</h4>
                    </row>
                    <div class="submi-section" ng-repeat="sub in marketSubmissions"  ng-if=" user.repostSettings.poolOn" ng-class="{'border-bottom':!$last}" >
                      <div class="">
                        <div class="row">
                          <div class="col-md-12">
                            <ul class="submissions-tab-list">
                              <li>Submitted by <strong>{{sub.name}} </strong></li>
                            </ul>   
                          </div>
                        </div>
                        <!--row ::end-->                
                        <div class="row">
                          <div class="col-md-10">                         
                            <div style="height: 160px; width: 100%;">
                              <iframe id="{{sub.trackID}}player" width="100%" height="160" src="{{sub.playerURL}}" style="margin:10px 0; position:relative; z-index:1; border:none;"></iframe>
                            </div>
                          </div>
                          <div class="col-md-2">
                            <div class="">
                              <div class="submitted-time">
                                <span ng-bind-html="getDiffTimeText(sub.pooledSendDate)"></span>
                              </div>
                              <ul class="submissions-tab-list ">
                                <button class="btn btn-border btn-sm b-radius-10 btn-block" ng-click="marketIgnore(sub)">IGNORE</button>
                                <!-- <button class="btn decline" ng-click="marketDecline(sub)">DECLINE</button> -->   
                                <button class="btn btn-pink btn-sm b-radius-10 btn-block" ng-click="marketSave(sub)">ACCEPT</button>
                              </ul> 
                            </div>
                          </div>
                        </div>
                        <!--row ::end-->
                        <div class="row">
                          <div class="col-md-6" style="padding-top: 20px;">
                            <div class="channel-check" ng-if="paidRepostAccounts.length > 0">
                              <div class="channel-masege">
                                <ul style="height: 20px;">
                                  <li class="" ng-repeat="chans in sub.selectedChannelName">{{chans}}</li>
                                </ul>
                              </div>
                              <div class="check-list">
                                <form action="#">
                                  <div class="pull-left" style="width:50%;" ng-repeat="chan in paidRepostAccounts" >
                                    <p >
                                      <label class="with-square-checkbox" ng-style="checkboxStyle(sub, chan)">
                                        <input style="" class="ng-untouched ng-valid ng-dirty ng-valid-parse ng-pristine ng-empty" type="checkbox" ng-model="sub[chan.user.username]" ng-change="changeBox(sub, chan)">
                                        <span>{{chan.user.username}}</span> </label>
                                      </p>
                                    </div>
                                  </form>                      
                                </div>
                              </div>
                            </div>
                            <div class="col-md-6" style="padding-top: 20px;">
                              <div class="channel-check" ng-if="uniqueGroup.length!= 0">
                                <div class="channel-masege">
                                  <ul style="height: 20px;">
                                    <li class="" ng-repeat="groups in sub.selectedGroups">{{groups}}</li>
                                  </ul>
                                </div>
                                <div class="check-list">
                                  <form action="#">
                                    <div class="pull-left" style="width:50%;" ng-repeat="group in uniqueGroup">
                                     <p>
                                       <label class="with-square-checkbox">
                                        <input style="" class="ng-untouched ng-valid ng-dirty ng-valid-parse ng-pristine ng-empty" type="checkbox" ng-model="sub[group]" ng-change="changeBoxGroup(sub, group)">
                                        <span>{{group}}</span></label>
                                      </p>
                                    </div>  
                                  </form>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!--row ::end-->
                        </div> 
                      </div>
                      <br/>
                      <div class="col-md-12 text-center margin-20" >
                        <button class="btn btn-pink" ng-if="user.repostSettings.poolOn" ng-click="loadMoreMarket()">LOAD MORE</button>           
                      </div>

                    </div>
                    <div class="space-10"></div>
                  </div>
                  <!-- ORGANIZE SCHEDULE :End -->
                  <!-- MANAGE REPOSTS : Start -->
                  <div role="tabpanel" class="tab-pane fade" id="managesubmissions">
                    <div class="managesubmissions">
                      <h4>Here you can create custom buttons which will trigger an email draft to launch in your mail client. We do this to make it easier for you to organize your submissions according to how you want to move forward with them. Examples of custom buttons can be "More" which could be a template email you send if you want to hear more music from the artist submitting for repost consideration.</h4>
                    </div>
                    <div class="managesubmissions">
                      <div class="row">
                        <div class="row nav-tabs margin0">
                          <div class="col-md-12 bg-white">
                            <form ng-submit="saveSettings()">
                              <br />
                              <div class="row margin-bottom-10" ng-repeat="item in customEmailButtons track by $index" style="border-bottom: solid 1px #dcdcdc;">
                                <div class="col-md-12">
                                  <div class="col-md-8 margin-bottom-10">
                                    <input type="text" ng-model="item.buttonText" class="form-control" placeholder="Button Title" index="{{$index}}">
                                    <br/>
                                    <input type="text" ng-model="item.toEmail" class="form-control toEmailArea{{$index}}" placeholder="To Email" index="{{$index}}" ng-click="addEventClass($index,'toEmailArea');">
                                    <br/>
                                    <input type="text" ng-model="item.subject" class="form-control subjectArea{{$index}}" placeholder="Subject" index="{{$index}}" ng-click="addEventClass($index,'subjectArea');">
                                    <br/>
                                    <textarea ng-model="item.emailBody" class="form-control emailBodyArea{{$index}}" rows="15" placeholder="Email body" index="{{$index}}" ng-click="addEventClass($index,'emailBodyArea');"></textarea>
                                    <br/>
                                    <div class="col-md-12 text-center">
                                      <button class="btn btn-default" ng-click="sendTestMail($index)">TEST EMAIL</button>
                                      <button class="btn btn-default" ng-click="removeItem($index)">DELETE</button>
                                    </div>
                                  </div>
                                  <div class="col-md-4 margin-bottom-10">
                                    <input ng-repeat="btn in dynamicButton " type="button" name="{{btn.name}}" class="btn btn-border organize-btn" style="margin-left:20px; display:block;" value="{{btn.name}}" ng-click="appendBody(btn)">
                                  </div>
                                </div>                             
                                <div class="space-10">&nbsp;</div>
                              </div>
                              <br/>
                              <div class="text-center margin-bottom-10">
                                <a href="#" class="btn btn-default" ng-click="addItem()">ADD CUSTOM EMAIL</a>
                              </div> 
                              <br/>
                              <div class="">
                                <div class="col-md-12 text-center" style="padding-top:20px;">
                                  <button type="submit" class="btn btn-pink b-radius-10 btn-enter">SAVE SETTINGS</button>
                                </div>
                              </div>
                              <br>
                              <br>
                            </form>
                          </div>
                        </div>
                      </div>  
                    </div>
                    <div class="space-20"></div>
                  </div>
                  <!-- MANAGE REPOSTS : End -->                
                  <!-- SOLD REPOSTS START --> 
                  <div role="tabpanel" class="tab-pane fade" id="soldReposts">
                    <div class="managesubmissions margin0" style="width:94%; border:none;">
                      <div class="row">
                        <div class="row margin0">
                          <div class="col-md-12 bg-white">
                            <form>
                              <div class="form-group">
                                <div class="input-group">
                                  <div class="input-group-addon"><i class="glyphicon glyphicon-search"></i>
                                  </div>
                                  <input type="text" class="form-control" placeholder="Search Reposts" ng-model="searchTerm">
                                </div>
                              </div>
                            </form>
                            <div class="space-10"></div> 
                            <div class="table-responsive">
                              <table class="table table-bordered table-striped">
                                <thead>
                                  <tr>
                                    <td>
                                      <a href="#" ng-click="sortType = 'username'; sortReverse = !sortReverse">Account Name
                                        <span ng-show="sortType == 'username' && !sortReverse" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType == 'username' && sortReverse" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType = 'title'; sortReverse = !sortReverse">Song Name 
                                        <span ng-show="sortType == 'title' && !sortReverse" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType == 'title' && sortReverse" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType = 'trackURL'; sortReverse = !sortReverse">Track Url 
                                        <span ng-show="sortType == 'trackURL' && !sortReverse" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType == 'trackURL' && sortReverse" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType = 'day'; sortReverse = !sortReverse">Day
                                        <span ng-show="sortType == 'day' && !sortReverse" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType == 'day' && sortReverse" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType = 'name'; sortReverse = !sortReverse">Submitter Name
                                        <span ng-show="sortType == 'name' && !sortReverse" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType = 'email'; sortReverse = !sortReverse">Submitter Email
                                        <span ng-show="sortType == 'email' && !sortReverse" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType == 'email' && sortReverse" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType = 'completed'; sortReverse = !sortReverse">Completed
                                        <span ng-show="sortType == 'completed' && !sortReverse" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType == 'completed' && sortReverse" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType = 'price'; sortReverse = !sortReverse">Price
                                        <span ng-show="sortType == 'price' && !sortReverse" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType == 'price' && sortReverse" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType = 'tastiness'; sortReverse = !sortReverse">Amount Received
                                        <span ng-show="sortType == 'tastiness' && !sortReverse" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType == 'tastiness' && sortReverse" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType = 'tastiness'; sortReverse = !sortReverse">Refunded
                                        <span ng-show="sortType == 'tastiness' && !sortReverse" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType == 'tastiness' && sortReverse" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr ng-repeat="item in soldReposts | orderBy:sortType:sortReverse | filter:searchTerm">
                                    <td>{{ item.username }}</td>
                                    <td>{{ item.data.title }}</td>
                                    <td>{{ item.data.trackURL }}</td>
                                    <td>{{ item.data.day |date}}</td>
                                    <td>{{ item.data.name }}</td>
                                    <td>{{ item.data.email }}</td>
                                    <td>{{ item.data.completed }}</td>
                                    <td>{{ item.data.price }}</td>
                                    <td>{{ item.data.payout.batch_header ? item.data.payout.batch_header.amount.value : 0 |currency }}</td>
                                    <td>{{ item.data.payout.batch_header ? true :false }}</td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div> 
                      <div class="space-20"></div> 
                      <!-- Earnings start -->
                      <div class="row">
                        <div class="row margin0">
                          <div class="col-md-12 bg-white">
                            <div class="table-responsive">
                              <table class="table table-bordered table-striped">
                                <thead>
                                  <tr>
                                    <td>
                                      <a href="#" ng-click="sortType1 = 'username'; sortReverse1 = !sortReverse1">Account Name
                                        <span ng-show="sortType1 == 'username' && !sortReverse1" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType1 == 'username' && sortReverse1" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType1 = 'amount'; sortReverse1 = !sortReverse1">Amount
                                        <span ng-show="sortType1 == 'amount' && !sortReverse1" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType1 == 'amount' && sortReverse1" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType1 = 'percentage'; sortReverse1 = !sortReverse1">Percentage Paid
                                        <span ng-show="sortType1 == 'percentage' && !sortReverse1" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType1 == 'percentage' && sortReverse1" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType1 = 'submissions'; sortReverse1 = !sortReverse1">Number of submissions
                                        <span ng-show="sortType1 == 'submissions' && !sortReverse1" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType1 == 'submissions' && sortReverse1" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                    <td>
                                      <a href="#" ng-click="sortType1 = 'paymentCount'; sortReverse1 = !sortReverse1">Number of payments
                                        <span ng-show="sortType1 == 'paymentCount' && !sortReverse1" class="fa fa-caret-down"></span>
                                        <span ng-show="sortType1 == 'paymentCount' && sortReverse1" class="fa fa-caret-up"></span>
                                      </a>
                                    </td>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr ng-repeat="item in earnings | orderBy:sortType1:sortReverse1 | filter:searchTerm">
                                    <td>{{ item.username }}</td>
                                    <td>{{ item.amount }}</td>
                                    <td>{{ item.percentage }}</td>
                                    <td>{{ item.submissions }}</td>
                                    <td>{{ item.paymentCount }}</td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Earnings end -->
                    </div>
                    <div class="space-20"></div>
                  </div>
                  <!-- SOLD REPOSTS END -->             
                </div>
                <!-- Tab panes :: End-->
              </div>
              <!-- overlay -->          
            </div>
          </div>
          <youtube-modal you-tube="youtubeModalId" modal-body="body" modal-footer="footer" modal-header="header" event-id="repostResponse" event-type="type"></youtube-modal>
          <div style="position:absolute; top:0; left:0; right:0; height:5000px; background-color: rgba(0,0,0,1); z-index: 1000;" ng-show="hideall">
          </div>
        </div>
        <!--overlay-->  
        <!--overlay-->
        <div style="position:absolute; top:0; left:0; right:0; height:5000px; background-color: rgba(0,0,0,0.85); text-align:center;" ng-show="showTestEmailModal">
          <div class="modal fade" id="emailModal" data-backdrop="static" role="dialog">
            <div class="modal-dialog modal-vertical-centered">    

              <div class="modal-content">
                <div style="text-align:center; padding:10px;">        
                  <div style="text-align:center;padding-bottom:10px;">
                   <div class="modal-body">
                     <input class="form-control form-scheduler" placeholder="Enter email address" style="text-align:center; width:300px; max-width:90%;" type="email" ng-model="email" required/>
                   </div>
                   <button type="button" class="btn btn-pink" data-dismiss="modal" ng-click="testEmail(email)">Send</button>
                 </div>
               </div>      
             </div>
           </div>
         </div>
       </div> 

       <ng-include src="'js/home/views/loader.html'"></ng-include>    
     </div>
   </div>
 </div>
